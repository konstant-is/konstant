{"version":3,"sources":["../../src/client/PermalinkFieldClient.tsx"],"sourcesContent":["'use client'\n\nimport type { UIFieldClientProps } from 'payload'\n\nimport { useConfig, useDocumentInfo, useFormFields } from '@payloadcms/ui'\nimport { useMemo } from 'react'\n\ntype Props = {\n  custom: {\n    sourceField: string\n  }\n} & UIFieldClientProps\n\nexport const PermalinkFieldClient: React.FC<Props> = ({ custom }) => {\n  const {\n    config: { serverURL },\n  } = useConfig()\n\n  // or fallback:\n  const url = serverURL ?? (typeof window !== 'undefined' ? window.location.origin : '')\n  const { id } = useDocumentInfo()\n\n  // Listen to the field value\n  const targetFieldValue = useFormFields(([fields]) => {\n    return fields[custom.sourceField]?.value as string\n  })\n\n  // Compute permalink only when necessary\n  const processedValue = useMemo(() => {\n    if (!targetFieldValue) {\n      return ''\n    }\n    return `${url}${targetFieldValue}`\n  }, [url, targetFieldValue])\n\n  if (!id || !processedValue) {\n    return null\n  }\n\n  return (\n    <div className=\"field-type permalinksField\">\n      <strong>Permalink:</strong>{' '}\n      <a href={processedValue} rel=\"noopener noreferrer\" target=\"_blank\">\n        {processedValue}\n      </a>\n    </div>\n  )\n}\n"],"names":["useConfig","useDocumentInfo","useFormFields","useMemo","PermalinkFieldClient","custom","config","serverURL","url","window","location","origin","id","targetFieldValue","fields","sourceField","value","processedValue","div","className","strong","a","href","rel","target"],"mappings":"AAAA;;AAIA,SAASA,SAAS,EAAEC,eAAe,EAAEC,aAAa,QAAQ,iBAAgB;AAC1E,SAASC,OAAO,QAAQ,QAAO;AAQ/B,OAAO,MAAMC,uBAAwC,CAAC,EAAEC,MAAM,EAAE;IAC9D,MAAM,EACJC,QAAQ,EAAEC,SAAS,EAAE,EACtB,GAAGP;IAEJ,eAAe;IACf,MAAMQ,MAAMD,aAAc,CAAA,OAAOE,WAAW,cAAcA,OAAOC,QAAQ,CAACC,MAAM,GAAG,EAAC;IACpF,MAAM,EAAEC,EAAE,EAAE,GAAGX;IAEf,4BAA4B;IAC5B,MAAMY,mBAAmBX,cAAc,CAAC,CAACY,OAAO;QAC9C,OAAOA,MAAM,CAACT,OAAOU,WAAW,CAAC,EAAEC;IACrC;IAEA,wCAAwC;IACxC,MAAMC,iBAAiBd,QAAQ;QAC7B,IAAI,CAACU,kBAAkB;YACrB,OAAO;QACT;QACA,OAAO,GAAGL,MAAMK,kBAAkB;IACpC,GAAG;QAACL;QAAKK;KAAiB;IAE1B,IAAI,CAACD,MAAM,CAACK,gBAAgB;QAC1B,OAAO;IACT;IAEA,qBACE,MAACC;QAAIC,WAAU;;0BACb,KAACC;0BAAO;;YAAoB;0BAC5B,KAACC;gBAAEC,MAAML;gBAAgBM,KAAI;gBAAsBC,QAAO;0BACvDP;;;;AAIT,EAAC"}