{"version":3,"sources":["../../src/fields/openingHours.ts"],"sourcesContent":["import { toCapitalized } from \"@konstant/utils\";\n\nimport { arrayRowLabelField } from \"./arrayRowLabelField.js\";\nimport { field } from \"../lib/field.js\";\nimport { timeField } from \"./timeField.js\";\n\nexport const weekdaysMap: Record<string, string> = {\n  1: \"Mondays\",\n  2: \"Tuesdays\",\n  3: \"Wednesdays\",\n  4: \"Thursdays\",\n  5: \"Fridays\",\n  6: \"Saturdays\",\n  7: \"Sundays\",\n};\n\nconst dayOptions = Object.keys(weekdaysMap).map((key) => ({\n  label: weekdaysMap[key] || \"\",\n  value: key,\n}));\n\nexport const openingHoursField = () => {\n  const items = field({\n    name: \"items\",\n    type: \"array\",\n    admin: {\n      components: {\n        RowLabel: arrayRowLabelField({\n          fieldName: \"label\",\n          prefix: \"\",\n        }),\n      },\n    },\n    fields: [\n      field({\n        name: \"days\",\n        type: \"select\",\n        defaultValue: [],\n        hasMany: true,\n        localized: false,\n        options: dayOptions,\n        required: true,\n      }),\n      field({ name: \"label\", type: \"text\", localized: true, required: true }),\n      ...timeFields(),\n    ],\n    label: \"Opening Hours\",\n  });\n\n  const customOpeningHours = field({\n    name: \"custom\",\n    type: \"array\",\n    fields: [\n      field({ name: \"label\", type: \"text\", localized: true, required: true }),\n      field({\n        name: \"date\",\n        type: \"date\",\n        admin: {\n          date: {\n            displayFormat: \"d MMM yyy\",\n            pickerAppearance: \"dayOnly\",\n          },\n        },\n        label: \"Date\",\n        localized: false,\n        required: true,\n      }),\n      ...timeFields(),\n    ],\n    label: \"Custom Opening Hours\",\n  });\n\n  return field({\n    name: \"openingHours\",\n    type: \"group\",\n    fields: [items, customOpeningHours],\n    interfaceName: \"OpeningHours\",\n    label: \"\",\n  });\n};\n\nconst timeFields = () => {\n  return [\n    field({\n      type: \"row\",\n      admin: {\n        condition: (_, siblingData) => !siblingData.isClosed,\n      },\n      fields: [\"openingTime\", \"closingTime\"].map((name) =>\n        timeField({ name, label: toCapitalized(name) })\n      ),\n    }),\n    field({ name: \"isClosed\", type: \"checkbox\", label: \"Closed whole day\" }),\n    field({\n      name: \"closedLabel\",\n      type: \"text\",\n      admin: { condition: (_, siblingData) => siblingData.isClosed },\n    }),\n  ];\n};\n"],"names":["toCapitalized","arrayRowLabelField","field","timeField","weekdaysMap","dayOptions","Object","keys","map","key","label","value","openingHoursField","items","name","type","admin","components","RowLabel","fieldName","prefix","fields","defaultValue","hasMany","localized","options","required","timeFields","customOpeningHours","date","displayFormat","pickerAppearance","interfaceName","condition","_","siblingData","isClosed"],"mappings":"AAAA,SAASA,aAAa,QAAQ,kBAAkB;AAEhD,SAASC,kBAAkB,QAAQ,0BAA0B;AAC7D,SAASC,KAAK,QAAQ,kBAAkB;AACxC,SAASC,SAAS,QAAQ,iBAAiB;AAE3C,OAAO,MAAMC,cAAsC;IACjD,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;AACL,EAAE;AAEF,MAAMC,aAAaC,OAAOC,IAAI,CAACH,aAAaI,GAAG,CAAC,CAACC,MAAS,CAAA;QACxDC,OAAON,WAAW,CAACK,IAAI,IAAI;QAC3BE,OAAOF;IACT,CAAA;AAEA,OAAO,MAAMG,oBAAoB;IAC/B,MAAMC,QAAQX,MAAM;QAClBY,MAAM;QACNC,MAAM;QACNC,OAAO;YACLC,YAAY;gBACVC,UAAUjB,mBAAmB;oBAC3BkB,WAAW;oBACXC,QAAQ;gBACV;YACF;QACF;QACAC,QAAQ;YACNnB,MAAM;gBACJY,MAAM;gBACNC,MAAM;gBACNO,cAAc,EAAE;gBAChBC,SAAS;gBACTC,WAAW;gBACXC,SAASpB;gBACTqB,UAAU;YACZ;YACAxB,MAAM;gBAAEY,MAAM;gBAASC,MAAM;gBAAQS,WAAW;gBAAME,UAAU;YAAK;eAClEC;SACJ;QACDjB,OAAO;IACT;IAEA,MAAMkB,qBAAqB1B,MAAM;QAC/BY,MAAM;QACNC,MAAM;QACNM,QAAQ;YACNnB,MAAM;gBAAEY,MAAM;gBAASC,MAAM;gBAAQS,WAAW;gBAAME,UAAU;YAAK;YACrExB,MAAM;gBACJY,MAAM;gBACNC,MAAM;gBACNC,OAAO;oBACLa,MAAM;wBACJC,eAAe;wBACfC,kBAAkB;oBACpB;gBACF;gBACArB,OAAO;gBACPc,WAAW;gBACXE,UAAU;YACZ;eACGC;SACJ;QACDjB,OAAO;IACT;IAEA,OAAOR,MAAM;QACXY,MAAM;QACNC,MAAM;QACNM,QAAQ;YAACR;YAAOe;SAAmB;QACnCI,eAAe;QACftB,OAAO;IACT;AACF,EAAE;AAEF,MAAMiB,aAAa;IACjB,OAAO;QACLzB,MAAM;YACJa,MAAM;YACNC,OAAO;gBACLiB,WAAW,CAACC,GAAGC,cAAgB,CAACA,YAAYC,QAAQ;YACtD;YACAf,QAAQ;gBAAC;gBAAe;aAAc,CAACb,GAAG,CAAC,CAACM,OAC1CX,UAAU;oBAAEW;oBAAMJ,OAAOV,cAAcc;gBAAM;QAEjD;QACAZ,MAAM;YAAEY,MAAM;YAAYC,MAAM;YAAYL,OAAO;QAAmB;QACtER,MAAM;YACJY,MAAM;YACNC,MAAM;YACNC,OAAO;gBAAEiB,WAAW,CAACC,GAAGC,cAAgBA,YAAYC,QAAQ;YAAC;QAC/D;KACD;AACH"}