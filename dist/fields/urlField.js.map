{"version":3,"sources":["../../src/fields/urlField.ts"],"sourcesContent":["import type { Field, FieldHook } from 'payload'\n\nimport type { UrlFieldConfig } from '../types.js'\nimport type { PluginContext } from '../utils/createPluginContext.js'\nimport { createPluginField } from '../utils/createPluginField.js'\nimport { generateUrl } from '../utils/generateUrl.js'\nimport { getPluginPath } from '../utils/getPluginPath.js'\n\nconst validateUrlField =\n  (context: PluginContext): FieldHook =>\n  ({ data }) => {\n    const url = generateUrl(context, data)\n\n    return url\n  }\n\nexport const createUrlField = createPluginField<UrlFieldConfig, Field>(\n  ({ context, fieldConfig }) => {\n    return {\n      name: fieldConfig.fieldName,\n      type: 'text',\n      admin: {\n        components: {\n          Cell: getPluginPath('client', '#UrlCell'),\n        },\n        description: 'Automatically generated url',\n        position: 'sidebar',\n        readOnly: true,\n      },\n      defaultValue: '',\n      hooks: {\n        beforeValidate: [validateUrlField(context)],\n      },\n      index: false, // Not indexed by default\n      localized: true, // Supports localization\n      required: true,\n    }\n  },\n)\n"],"names":["createPluginField","generateUrl","getPluginPath","validateUrlField","context","data","url","createUrlField","fieldConfig","name","fieldName","type","admin","components","Cell","description","position","readOnly","defaultValue","hooks","beforeValidate","index","localized","required"],"mappings":"AAIA,SAASA,iBAAiB,QAAQ,gCAA+B;AACjE,SAASC,WAAW,QAAQ,0BAAyB;AACrD,SAASC,aAAa,QAAQ,4BAA2B;AAEzD,MAAMC,mBACJ,CAACC,UACD,CAAC,EAAEC,IAAI,EAAE;QACP,MAAMC,MAAML,YAAYG,SAASC;QAEjC,OAAOC;IACT;AAEF,OAAO,MAAMC,iBAAiBP,kBAC5B,CAAC,EAAEI,OAAO,EAAEI,WAAW,EAAE;IACvB,OAAO;QACLC,MAAMD,YAAYE,SAAS;QAC3BC,MAAM;QACNC,OAAO;YACLC,YAAY;gBACVC,MAAMZ,cAAc,UAAU;YAChC;YACAa,aAAa;YACbC,UAAU;YACVC,UAAU;QACZ;QACAC,cAAc;QACdC,OAAO;YACLC,gBAAgB;gBAACjB,iBAAiBC;aAAS;QAC7C;QACAiB,OAAO;QACPC,WAAW;QACXC,UAAU;IACZ;AACF,GACD"}